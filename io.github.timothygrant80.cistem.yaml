app-id: io.github.timothygrant80.cistem
runtime: org.freedesktop.Platform
runtime-version: "23.08"
sdk: org.freedesktop.Sdk

modules:
  - name: fftw
    buildsystem: autotools
    config-opts:
      - --enable-shared
      - --enable-float
      - --disable-static
    sources:
      - type: archive
        url: https://fftw.org/fftw-3.3.10.tar.gz
        sha256: 56c932549852cddcfafdab3820b0200c7742675be92179e59e6215b340e26467
      - type: shell
        commands:
          - cp /usr/share/gnu-config/config.sub .
          - cp /usr/share/gnu-config/config.guess .

  - name: wxWidgets
    buildsystem: autotools
    config-opts:
      - --enable-clipboard
      - --enable-controls
      - --enable-dataviewctrl
      - --enable-display
      - --enable-dnd
      - --enable-graphics_ctx
      - --enable-std_string
      - --enable-svg
      - --enable-unicode
      - --enable-webviewwebkit
      - --with-expat
      - --with-libjpeg
      - --with-libpng
      - --with-libtiff
      - --with-opengl
      - --with-zlib
      - --disable-dependency-tracking
      - --disable-tests
      - --disable-precomp-headers
      - --disable-monolithic
    sources:
      - type: git
        url: https://github.com/wxWidgets/wxWidgets.git
        tag: v3.0.2

  - name: cistem
    buildsystem: autotools
    # config-opts:
    #   - --with-wx-config=/app/libexec/wxWidgets/bin/wx-config
    sources:
      - type: archive
        url: https://grigoriefflab.umassmed.edu/sites/default/files/cistem-1.0.0-beta-source-code.tar.gz
        sha256: c62068f53d0a269ffa1bfff34641597d3795989a930686437fba9eed7a991af6
      - type: patch
        path: configure.ac.path
      # - type: shell
      #   commands:
      #     - ln -sf /app/bin/wx-config-3.0 /app/bin/wx-config